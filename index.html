<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thumbnail Maker</title>
    <!-- Link to the external stylesheet -->
    <link rel="stylesheet" href="style.css">
    <!-- Link to the external JavaScript files. 'defer' is important! -->
    <script src="templates.js" defer></script>
    <script src="script.js" defer></script>
    <script src="style-presets.js" defer></script>
    <script type="module" defer>
        import { polyfillCountryFlagEmojis } from "https://cdn.skypack.dev/country-flag-emoji-polyfill";
        polyfillCountryFlagEmojis();
        console.log("Twemoji Country Flags font polyfill loaded.");
    </script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
</head>
<body>
    <!-- The entire body of your index3.html file goes here, unchanged. -->
    <!-- For brevity, I'm not pasting the 500+ lines of body HTML, -->
    <!-- but you should copy it directly from your index3.html file. -->
    <div class="app-grid">
        <header class="app-header">
            <h1>Thumbnail Maker</h1>
            <button class="theme-toggle" onclick="toggleTheme()">Toggle Dark Mode</button>
        </header>

        <aside class="left-panel">
            <!-- All the layout presets and text line controls go here -->
            <div class="panel-section">
                <h2>Layouts</h2>
                <div class="layout-presets">
                    <!-- Existing 6 layouts -->
                    <button class="layout-btn" onclick="setLayout(1)">
                        <div class="layout-icon">
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                        </div>
                        Part 1 (Old)
                    </button>
                    <button class="layout-btn" onclick="setLayout(2)">
                        <div class="layout-icon">
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                        </div>
                        Part 2 (Old)
                    </button>
                    <button class="layout-btn" onclick="setLayout(3)">
                        <div class="layout-icon">
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                        </div>
                        Part 3 (Old)
                    </button>
                    <button class="layout-btn" onclick="setLayout(4)">
                        <div class="layout-icon">
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 45%"></div>
                                <div class="layout-line" style="width: 45%"></div>
                            </div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                        </div>
                        Extra (Old)
                    </button>
                    <button class="layout-btn" onclick="setLayout(5)">
                        <div class="layout-icon">
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 65%"></div>
                                <div class="layout-line" style="width: 30%"></div>
                            </div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                        </div>
                        Mapping Update
                    </button>
                    <button class="layout-btn" onclick="setLayout(6)">
                        <div class="layout-icon">
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 95%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                        </div>
                        Breaking (Old)
                    </button>

                    <!-- NEW ROW OF 5 LAYOUTS (Generic) -->
                    <button class="layout-btn" onclick="setLayout(7)">
                        <div class="layout-icon"> <!-- Generic Icon -->
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 45%"></div>
                                <div class="layout-line" style="width: 45%"></div>
                            </div>
                            <div class="layout-line" style="width: 90%; margin-bottom: 15px; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: auto"></div>
                        </div>
                        Breaking Gap (Old)
                    </button>
                    <button class="layout-btn" onclick="setLayout(8)">
                        <div class="layout-icon"> <!-- Generic Icon -->
                            <div class="layout-line" style="width: 40%; margin-left: 0; margin-right: auto"></div>
                            <div class="layout-line" style="width: 50%; margin-left: 0; margin-right: auto"></div>
                            <div class="layout-line" style="width: 40%; margin-left: 0; margin-right: auto"></div>
                            <div class="layout-line" style="width: 70%; margin-left: auto; margin-right: 0"></div>
                        </div>
                        3 L + 1 R
                    </button>
                    <button class="layout-btn" onclick="setLayout(9)">
                        <div class="layout-icon"> <!-- Generic Icon -->
                            <div class="layout-line" style="width: 40%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 50%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 40%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 70%; margin-left: 0; margin-right: auto"></div>
                        </div>
                        3 R + 1 L
                    </button>
                    <button class="layout-btn" onclick="setLayout(10)">
                        <div class="layout-icon"> <!-- Generic Icon -->
                            <div class="layout-line" style="width: 30%; margin-bottom: 10px; margin-left: auto; margin-right: 0"></div>
                        </div>
                        BOOM!
                    </button>
                    <button class="layout-btn" onclick="setLayout(11)">
                        <div class="layout-icon" style="background-color: #db8f0a">
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 50%"></div>
                                <div class="layout-line" style="width: 50%"></div>
                            </div>
                            <div class="layout-line" style="width: 30%; margin-bottom: 10px; margin-left: 5; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>

                        </div>
                        Hits & Losses
                    </button>
                    <!-- END NEW ROW OF 5 LAYOUTS -->

                    <!-- NEW ROW OF 4 LAYOUTS (to make it 15 total) -->
                     <button class="layout-btn" onclick="setLayout(12)">
                        <div class="layout-icon" style="background-color: #0edb0a"> <!-- Generic Icon -->
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 50%"></div>
                                <div class="layout-line" style="width: 50%"></div>
                            </div>
                            <div class="layout-line" style="width: 30%; margin-bottom: 10px; margin-left: 5; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>


                        </div>
                        Military Aid
                    </button>
                    <button class="layout-btn" onclick="setLayout(13)">
                        <div class="layout-icon" style="background-color: #db0ad8"> <!-- Generic Icon -->
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 50%"></div>
                                <div class="layout-line" style="width: 50%"></div>
                            </div>
                            <div class="layout-line" style="width: 30%; margin-bottom: 10px; margin-left: 5; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>

                        </div>
                        Geopol News
                    </button>
                    <button class="layout-btn" onclick="setLayout(14)">
                        <div class="layout-icon" style="background-color: #ffff00"> <!-- Generic Icon -->
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 50%"></div>
                                <div class="layout-line" style="width: 50%"></div>
                            </div>
                            <div class="layout-line" style="width: 30%; margin-bottom: 10px; margin-left: 5; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>

                        </div>
                        Extra / Specials
                    </button>
                    <button class="layout-btn" onclick="setLayout(15)">
                        <div class="layout-icon" style="background-color: #000000"> <!-- Generic Icon -->
                            <div style="display: flex; justify-content: center">
                                <div class="layout-line" style="width: 50%"></div>
                                <div class="layout-line" style="width: 50%"></div>
                            </div>
                            <div class="layout-line" style="width: 30%; margin-bottom: 10px; margin-left: 5; margin-right: auto"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>
                            <div class="layout-line" style="width: 80%; margin-left: auto; margin-right: 0"></div>

                        </div>
                        Breaking news
                    </button>
                    <button class="layout-btn" onclick="setLayout(16)" style="height: 100%">
                        <div class="layout-icon" style="background-color: #db8f0a; height: 5px">
    

                        </div>
                        ALT
                    </button>
                                    <!-- NEW ROW OF 4 LAYOUTS (to make it 15 total) -->
                     <button class="layout-btn" onclick="setLayout(17)">
                        <div class="layout-icon" style="background-color: #0edb0a; height: 5px"> <!-- Generic Icon -->



                        </div>
                       Alt
                    </button>
                    <button class="layout-btn" onclick="setLayout(18)">
                        <div class="layout-icon" style="background-color: #db0ad8; height: 5px"> <!-- Generic Icon -->


                        </div>
                        Alt
                    </button>
                    <button class="layout-btn" onclick="setLayout(19)">
                        <div class="layout-icon" style="background-color: #ffff00; height: 5px"> <!-- Generic Icon -->


                        </div>
                        Alt
                    </button>
                    <button class="layout-btn" onclick="setLayout(20)">
                        <div class="layout-icon" style="background-color: #000000; height: 5px"> <!-- Generic Icon -->


                        </div>
                        Alt
                    </button>
                        <button class="layout-btn" onclick="setLayout(21)" style="height: 100%">
                        <div class="layout-icon" style="background-color: #db8f0a; height: 5px">
    

                        </div>
                        Rule-6s (R)
                    </button>
                                    <!-- NEW ROW OF 4 LAYOUTS (to make it 15 total) -->
                     <button class="layout-btn" onclick="setLayout(22)">
                        <div class="layout-icon" style="background-color: #0edb0a; height: 5px"> <!-- Generic Icon -->



                        </div>
                        Rule-6s (R)
                    </button>
                    <button class="layout-btn" onclick="setLayout(23)">
                        <div class="layout-icon" style="background-color: #db0ad8; height: 5px"> <!-- Generic Icon -->


                        </div>
                        Rule-6s (R)
                    </button>
                    <button class="layout-btn" onclick="setLayout(24)">
                        <div class="layout-icon" style="background-color: #ffff00; height: 5px"> <!-- Generic Icon -->


                        </div>
                        Rule-6s (R)
                    </button>
                    <button class="layout-btn" onclick="setLayout(25)">
                        <div class="layout-icon" style="background-color: #000000; height: 5px"> <!-- Generic Icon -->


                        </div>
                        Rule-6s (R)
                    </button>
                <!-- END NEW ROW OF 4 LAYOUTS -->
                </div>
                <!-- PASTE THIS CODE IN index.html -->
            </div>
            <div class="panel-section">
                <button onclick="showFontPreviewModal()" style="width: 100%; margin-bottom: 15px;">Preview All Fonts</button>
            </div>

            <div class="panel-section">
                <h2>Add Elements</h2>
                <div class="add-object-grid">
                    <button class="add-object-btn" onclick="addObject('shape', { shapeType: 'arrow' })">Arrow</button>
                    <button class="add-object-btn" onclick="addObject('shape', { shapeType: 'circle' })">Circle</button>
                    <button class="add-object-btn" onclick="addObject('shape', { shapeType: 'square' })">Square</button>
                    <button class="add-object-btn" onclick="showPresetPickerForSnippet()">Add Styled Text</button>
                </div>
            </div>
            <div class="panel-section">
                <h2>Text Lines</h2>    
                <div class="text-input-group">
                    <div class="text-input">
                        <input type="text" id="text1" value="UKRAINE WAR" placeholder="Text Line 1">
                        <div class="color-input-container">
                            <input type="color" id="color1" value="#4B4BE2">
                            <div class="color-preview" id="preview1"></div>
                        </div>
                        <input type="number" id="size1" value="160" min="10" max="500">
                    </div>
                    <div class="toggle-controls-container">
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'pos1')">Position</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'style1')">Style</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'bg1')">Background</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'shadow1')">Shadow</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'fx1')">FX</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'presets1')">Presets</button>


                    </div>
                    <div id="pos1" class="collapsible-controls">
                        <div class="text-position-controls">
                            <label>X: <input type="number" id="x1" class="pos-input" value="960"></label>
                            <label>Y: <input type="number" id="y1" class="pos-input" value="756"></label>
                            <button class="align-btn" onclick="setTextAlignment(0, 'left')">L</button>
                            <button class="align-btn" onclick="setTextAlignment(0, 'center')">C</button>
                            <button class="align-btn" onclick="setTextAlignment(0, 'right')">R</button>
                        </div>
                    </div>
                    <div id="style1" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Stroke: <input type="color" id="strokeColor1" value="#000000"></label>
                            <label>Thick: <input type="number" id="strokeThickness1" class="pos-input" value="2" min="0" max="50"></label>
                        </div>
                    </div>
                    <div id="bg1" class="collapsible-controls">
                        <div class="text-style-controls text-style-grid-row">
                            <label>BG: <input type="color" id="bgColor1" value="#ffffff"></label>
                            <label>BG Pad: <input type="number" id="bgPadding1" class="pos-input" value="10" min="0" max="50"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label><input type="checkbox" id="bgFullWidth1"> Full BG</label>
                            <label>BG Alpha: <input type="range" id="bgAlpha1" min="0" max="100" value="0" step="5"> <span id="bgAlphaValue1">0%</span></label>
                        </div>
                    </div>
                    <div id="shadow1" class="collapsible-controls">
                        <div class="text-style-controls text-style-grid-row">
                            <label title="Enable Shadow"><input type="checkbox" id="shadowEnabled1"> Enable Shadow</label>
                            <label>Shadow Color: <input type="color" id="shadowColor1" value="#000000"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Shadow Alpha: <input type="range" id="shadowAlpha1" min="0" max="100" value="50" step="5"> <span id="shadowAlphaValue1">50%</span></label>
                            <label>Shadow Blur: <input type="number" id="shadowBlur1" class="pos-input" value="5" min="0" max="50"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Offset X: <input type="number" id="shadowOffsetX1" class="pos-input" value="2" min="-50" max="50"></label>
                            <label>Offset Y: <input type="number" id="shadowOffsetY1" class="pos-input" value="2" min="-50" max="50"></label>
                        </div>
                    </div>    
                    <div id="fx1" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Font:
                                <select id="fontFamily1">
                                    <option value="'Berlin Sans FB Demi Bold', sans-serif">Berlin Sans FB Demi Bold</option>
                                    <option value="'Bangers', cursive">Bangers</option>
                                    <option value="'Suez One', serif">Suez One</option>
                                    <option value="'VT323', monospace">VT323</option>
                                    <option value="'Abril Fatface', serif">Abril Fatface</option>
                                    <option value="'Aclonica Regular', sans-serif">Aclonica Regular</option>
                                    <option value="'Acme Regular', sans-serif">Acme Regular</option>
                                    <option value="'ADLaM Display Regular', cursive">ADLaM Display Regular</option>
                                    <option value="'Afacad Regular', sans-serif">Afacad Regular</option>
                                    <option value="'Agbalumo Regular', cursive">Agbalumo Regular</option>
                                    <option value="'Akronim Regular', cursive">Akronim Regular</option>
                                    <option value="'Alata Regular', sans-serif">Alata Regular</option>
                                    <option value="'Alexandria Regular', sans-serif">Alexandria Regular</option>
                                    <option value="'Alfa Slab One Regular', cursive">Alfa Slab One Regular</option>
                                    <option value="'Alkatra Regular', cursive">Alkatra Regular</option>
                                    <option value="'Almendra Display Regular', cursive">Almendra Display Regular</option>
                                    <option value="'Alumni Sans Regular', sans-serif">Alumni Sans Regular</option>
                                    <option value="'Amethysta Regular', serif">Amethysta Regular</option>
                                    <option value="'Amiko Regular', sans-serif">Amiko Regular</option>
                                    <option value="'Annapurna SIL', serif">Annapurna SIL</option>
                                    <option value="'Anta Regular', sans-serif">Anta Regular</option>
                                    <option value="'AR One Sans Regular', sans-serif">AR One Sans Regular</option>
                                    <option value="'Audiowide Regular', sans-serif">Audiowide Regular</option>
                                    <option value="'Bagel Fat One Regular', cursive">Bagel Fat One Regular</option>
                                    <option value="'Bakbak One Regular', sans-serif">Bakbak One Regular</option>
                                    <option value="'Barriecito Regular', cursive">Barriecito Regular</option>
                                    <option value="'Barrio Regular', cursive">Barrio Regular</option>
                                    <option value="'Berkshire Swash Regular', cursive">Berkshire Swash Regular</option>
                                    <option value="'Black And White Picture Regular', sans-serif">Black And White Picture Regular</option>
                                    <option value="'Black Ops One Regular', sans-serif">Black Ops One Regular</option>
                                    <option value="'Blaka Hollow Regular', cursive">Blaka Hollow Regular</option>
                                    <option value="'Bonbon Regular', cursive">Bonbon Regular</option>
                                    <option value="'Butcherman Regular', cursive">Butcherman Regular</option>
                                    <option value="'Caesar Dressing', cursive">Caesar Dressing</option>
                                    <option value="'Chokokutai Regular', cursive">Chokokutai Regular</option>
                                    <option value="'Eater', cursive">Eater</option>
                                    <option value="'Emblema One', cursive">Emblema One</option>
                                    <option value="'Fascinate', cursive">Fascinate</option>
                                    <option value="'Faster One Regular', cursive">Faster One Regular</option>
                                    <option value="'Federo', sans-serif">Federo</option>
                                    <option value="'Frijole', cursive">Frijole</option>
                                    <option value="'Fugaz One', sans-serif">Fugaz One</option>
                                    <option value="'Gabarito Regular', sans-serif">Gabarito Regular</option>
                                    <option value="'Geostar Fill', sans-serif">Geostar Fill</option>
                                    <option value="'Geostar', sans-serif">Geostar</option>
                                    <option value="'Goblin One', cursive">Goblin One</option>
                                    <option value="'Gochi Hand', cursive">Gochi Hand</option>
                                    <option value="'Hachi Maru Pop Regular', cursive">Hachi Maru Pop Regular</option>
                                    <option value="'Hahmlet Regular', serif">Hahmlet Regular</option>
                                    <option value="'Hedvig Letters Sans Regular', sans-serif">Hedvig Letters Sans Regular</option>
                                    <option value="'Hedvig Letters Serif 24pt Regular', serif">Hedvig Letters Serif 24pt Regular</option>
                                    <option value="'Honk Regular', cursive">Honk Regular</option>
                                    <option value="'Ingrid Darling Regular', cursive">Ingrid Darling Regular</option>
                                    <option value="'Jacquarda Bastarda 9 Regular', cursive">Jacquarda Bastarda 9 Regular</option>
                                    <option value="'Kablammo Regular', cursive">Kablammo Regular</option>
                                    <option value="'Kalnia Regular', sans-serif">Kalnia Regular</option>
                                    <option value="'Kay Pho Du', serif">Kay Pho Du</option>
                                    <option value="'Kdam Thmor Pro Regular', sans-serif">Kdam Thmor Pro Regular</option>
                                    <option value="'Kode Mono Regular', monospace">Kode Mono Regular</option>
                                    <option value="'Radio Canada Bold', sans-serif">Radio Canada Bold</option>
                                    <option value="'Radio Canada Regular', sans-serif">Radio Canada Regular</option>
                                    <option value="'Roboto (2)', sans-serif">Roboto (2)</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Stint Ultra Condensed', sans-serif">Stint Ultra Condensed</option>
                                    <option value="'Stint Ultra Expanded', sans-serif">Stint Ultra Expanded</option>
                                    <option value="'Stoke Regular', serif">Stoke Regular</option>
                                    <option value="'Strait Regular', sans-serif">Strait Regular</option>
                                    <option value="'Style Script Regular', cursive">Style Script Regular</option>
                                    <option value="'Stylish Regular', sans-serif">Stylish Regular</option>
                                    <option value="'Sue Ellen Francisco ', cursive">Sue Ellen Francisco </option>
                                    <option value="'SuezOne-Regular', serif">SuezOne-Regular</option>
                                    <option value="'Sulphur Point Regular', sans-serif">Sulphur Point Regular</option>
                                    <option value="'Sunshiney Regular', cursive">Sunshiney Regular</option>
                                    <option value="'Syncopate Regular', sans-serif">Syncopate Regular</option>
                                    <option value="'Syne Tactile Regular', sans-serif">Syne Tactile Regular</option>
                                    <option value="'Tilt Prism Regular', cursive">Tilt Prism Regular</option>
                                    <option value="'Tilt Warp Regular', cursive">Tilt Warp Regular</option>
                                    <option value="'Unbounded Regular', sans-serif">Unbounded Regular</option>
                                    <option value="'Uncial Antiqua', cursive">Uncial Antiqua</option>
                                    <option value="'Underdog', cursive">Underdog</option>
                                    <option value="'Unica One Regular', sans-serif">Unica One Regular</option>
                                    <option value="'UnifrakturCook', cursive">UnifrakturCook</option>
                                    <option value="'UnifrakturMaguntia', cursive">UnifrakturMaguntia</option>
                                    <option value="'Urbanist Regular', sans-serif">Urbanist Regular</option>
                                    <option value="'Vampiro One', cursive">Vampiro One</option>
                                    <option value="'Vast Shadow Regular', cursive">Vast Shadow Regular</option>
                                    <option value="'Viaoda Libre Regular', cursive">Viaoda Libre Regular</option>
                                    <option value="'Vidaloka ', serif">Vidaloka </option>
                                    <option value="'Vina Sans Regular', sans-serif">Vina Sans Regular</option>
                                    <option value="'Vollkorn Regular', serif">Vollkorn Regular</option>
                                    <option value="'Voltaire Regular', sans-serif">Voltaire Regular</option>
                                    <option value="'Wallpoet', cursive">Wallpoet</option>
                                    <option value="'Walter Turncoat Regular', cursive">Walter Turncoat Regular</option>
                                    <option value="'Wire One Regular', sans-serif">Wire One Regular</option>
                                    <option value="'Workbench Regular', sans-serif">Workbench Regular</option>
                                    <option value="'Young Serif Regular', serif">Young Serif Regular</option>
                                    <option value="'Zen Kaku Gothic Antique Regular', sans-serif">Zen Kaku Gothic Antique Regular</option>
                                    <option value="'Zen Tokyo Zoo Regular', cursive">Zen Tokyo Zoo Regular</option>
                                    <option value="'Zhi Mang Xing Regular', cursive">Zhi Mang Xing Regular</option>
                                    <option value="'Zilla Slab', serif">Zilla Slab</option>
                                </select>
                            </label>
                            <label>Effect:
                                <select id="advancedEffectType1">
                                    <option value="none">None</option>
                                    <option value="neon">Neon</option>
                                    <option value="splice">Splice</option>
                                    <option value="echo">Echo</option>
                                    <option value="glitch">Glitch</option>
                                </select>
                            </label>
                        </div>
                        <!-- Contextual controls for effects, hidden by default -->
                        <div id="fx-params1" class="text-style-controls fx-params">
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C1: <input type="color" id="effectColor1_1"></label>
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C2: <input type="color" id="effectColor2_1"></label>
                            <label class="fx-param-control" data-fx-for="glitch">FX C3: <input type="color" id="effectColor3_1"></label>
                            <label class="fx-param-control" data-fx-for="splice echo glitch">Dist: <input type="range" id="effectDistance1" min="0" max="50" value="10"></label>
                            <label class="fx-param-control" data-fx-for="splice echo">Angle: <input type="range" id="effectAngle1" min="-180" max="180" value="-45"></label>
                            <label class="fx-param-control" data-fx-for="neon">Glow: <input type="range" id="effectGlowSize1" min="0" max="100" value="20"></label>
                        </div>
                    </div>
                    <div id="presets1" class="collapsible-controls preset-gallery">
                            <!-- Preset previews will be generated here by JS -->
                    </div>  
                </div>
                <div class="presets" id="titlePresets">
                    <button class="preset-btn" onclick="setTitle('UKRAINE WAR')">Ukraine War</button>
                    <button class="preset-btn" onclick="setTitle('US POLITICS')">US Politics</button>
                    <button class="preset-btn" onclick="setTitle('UPDATE')">Update</button>
                </div>
                <div class="text-input-group">
                    <div class="text-input">
                        <input type="text" id="text2" value="NEWS UPDATE" placeholder="Text Line 2">
                        <div class="color-input-container">
                            <input type="color" id="color2" value="#ffff00">
                            <div class="color-preview" id="preview2"></div>
                        </div>
                        <input type="number" id="size2" value="160" min="10" max="500">
                    </div>
                    <div class="toggle-controls-container">
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'pos2')">Position</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'style2')">Style</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'bg2')">Background</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'shadow2')">Shadow</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'fx2')">FX</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'presets2')">Presets</button>
                    </div>
                    <div id="pos2" class="collapsible-controls">
                        <div class="text-position-controls">
                            <label>X: <input type="number" id="x2" class="pos-input" value="960"></label>
                            <label>Y: <input type="number" id="y2" class="pos-input" value="756"></label>
                            <button class="align-btn" onclick="setTextAlignment(1, 'left')">L</button>
                            <button class="align-btn" onclick="setTextAlignment(1, 'center')">C</button>
                            <button class="align-btn" onclick="setTextAlignment(1, 'right')">R</button>
                        </div>
                    </div>
                    <div id="style2" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Stroke: <input type="color" id="strokeColor2" value="#000000"></label>
                            <label>Thick: <input type="number" id="strokeThickness2" class="pos-input" value="2" min="0" max="50"></label>
                        </div>
                    </div>
                    <div id="bg2" class="collapsible-controls">
                        <div class="text-style-controls text-style-grid-row">
                            <label>BG: <input type="color" id="bgColor2" value="#ffffff"></label>
                            <label>BG Pad: <input type="number" id="bgPadding2" class="pos-input" value="10" min="0" max="50"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label><input type="checkbox" id="bgFullWidth2"> Full BG</label>
                            <label>BG Alpha: <input type="range" id="bgAlpha2" min="0" max="100" value="0" step="5"> <span id="bgAlphaValue2">0%</span></label>
                        </div>
                    </div>
                    <div id="shadow2" class="collapsible-controls">
                        <div class="text-style-controls text-style-grid-row">
                            <label title="Enable Shadow"><input type="checkbox" id="shadowEnabled2"> Enable Shadow</label>
                            <label>Shadow Color: <input type="color" id="shadowColor2" value="#000000"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Shadow Alpha: <input type="range" id="shadowAlpha2" min="0" max="100" value="50" step="5"> <span id="shadowAlphaValue2">50%</span></label>
                            <label>Shadow Blur: <input type="number" id="shadowBlur2" class="pos-input" value="5" min="0" max="50"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Offset X: <input type="number" id="shadowOffsetX2" class="pos-input" value="2" min="-50" max="50"></label>
                            <label>Offset Y: <input type="number" id="shadowOffsetY2" class="pos-input" value="2" min="-50" max="50"></label>
                        </div>
                    </div>
                    <div id="fx2" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Font:
                                <select id="fontFamily2">
                                    <option value="'Berlin Sans FB Demi Bold', sans-serif">Berlin Sans FB Demi Bold</option>
                                    <option value="'Bangers', cursive">Bangers</option>
                                    <option value="'Suez One', serif">Suez One</option>
                                    <option value="'VT323', monospace">VT323</option>
                                    <option value="'Abril Fatface', serif">Abril Fatface</option>
                                    <option value="'Aclonica Regular', sans-serif">Aclonica Regular</option>
                                    <option value="'Acme Regular', sans-serif">Acme Regular</option>
                                    <option value="'ADLaM Display Regular', cursive">ADLaM Display Regular</option>
                                    <option value="'Afacad Regular', sans-serif">Afacad Regular</option>
                                    <option value="'Agbalumo Regular', cursive">Agbalumo Regular</option>
                                    <option value="'Akronim Regular', cursive">Akronim Regular</option>
                                    <option value="'Alata Regular', sans-serif">Alata Regular</option>
                                    <option value="'Alexandria Regular', sans-serif">Alexandria Regular</option>
                                    <option value="'Alfa Slab One Regular', cursive">Alfa Slab One Regular</option>
                                    <option value="'Alkatra Regular', cursive">Alkatra Regular</option>
                                    <option value="'Almendra Display Regular', cursive">Almendra Display Regular</option>
                                    <option value="'Alumni Sans Regular', sans-serif">Alumni Sans Regular</option>
                                    <option value="'Amethysta Regular', serif">Amethysta Regular</option>
                                    <option value="'Amiko Regular', sans-serif">Amiko Regular</option>
                                    <option value="'Annapurna SIL', serif">Annapurna SIL</option>
                                    <option value="'Anta Regular', sans-serif">Anta Regular</option>
                                    <option value="'AR One Sans Regular', sans-serif">AR One Sans Regular</option>
                                    <option value="'Audiowide Regular', sans-serif">Audiowide Regular</option>
                                    <option value="'Bagel Fat One Regular', cursive">Bagel Fat One Regular</option>
                                    <option value="'Bakbak One Regular', sans-serif">Bakbak One Regular</option>
                                    <option value="'Barriecito Regular', cursive">Barriecito Regular</option>
                                    <option value="'Barrio Regular', cursive">Barrio Regular</option>
                                    <option value="'Berkshire Swash Regular', cursive">Berkshire Swash Regular</option>
                                    <option value="'Black And White Picture Regular', sans-serif">Black And White Picture Regular</option>
                                    <option value="'Black Ops One Regular', sans-serif">Black Ops One Regular</option>
                                    <option value="'Blaka Hollow Regular', cursive">Blaka Hollow Regular</option>
                                    <option value="'Bonbon Regular', cursive">Bonbon Regular</option>
                                    <option value="'Butcherman Regular', cursive">Butcherman Regular</option>
                                    <option value="'Caesar Dressing', cursive">Caesar Dressing</option>
                                    <option value="'Chokokutai Regular', cursive">Chokokutai Regular</option>
                                    <option value="'Eater', cursive">Eater</option>
                                    <option value="'Emblema One', cursive">Emblema One</option>
                                    <option value="'Fascinate', cursive">Fascinate</option>
                                    <option value="'Faster One Regular', cursive">Faster One Regular</option>
                                    <option value="'Federo', sans-serif">Federo</option>
                                    <option value="'Frijole', cursive">Frijole</option>
                                    <option value="'Fugaz One', sans-serif">Fugaz One</option>
                                    <option value="'Gabarito Regular', sans-serif">Gabarito Regular</option>
                                    <option value="'Geostar Fill', sans-serif">Geostar Fill</option>
                                    <option value="'Geostar', sans-serif">Geostar</option>
                                    <option value="'Goblin One', cursive">Goblin One</option>
                                    <option value="'Gochi Hand', cursive">Gochi Hand</option>
                                    <option value="'Hachi Maru Pop Regular', cursive">Hachi Maru Pop Regular</option>
                                    <option value="'Hahmlet Regular', serif">Hahmlet Regular</option>
                                    <option value="'Hedvig Letters Sans Regular', sans-serif">Hedvig Letters Sans Regular</option>
                                    <option value="'Hedvig Letters Serif 24pt Regular', serif">Hedvig Letters Serif 24pt Regular</option>
                                    <option value="'Honk Regular', cursive">Honk Regular</option>
                                    <option value="'Ingrid Darling Regular', cursive">Ingrid Darling Regular</option>
                                    <option value="'Jacquarda Bastarda 9 Regular', cursive">Jacquarda Bastarda 9 Regular</option>
                                    <option value="'Kablammo Regular', cursive">Kablammo Regular</option>
                                    <option value="'Kalnia Regular', sans-serif">Kalnia Regular</option>
                                    <option value="'Kay Pho Du', serif">Kay Pho Du</option>
                                    <option value="'Kdam Thmor Pro Regular', sans-serif">Kdam Thmor Pro Regular</option>
                                    <option value="'Kode Mono Regular', monospace">Kode Mono Regular</option>
                                    <option value="'Radio Canada Bold', sans-serif">Radio Canada Bold</option>
                                    <option value="'Radio Canada Regular', sans-serif">Radio Canada Regular</option>
                                    <option value="'Roboto (2)', sans-serif">Roboto (2)</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Stint Ultra Condensed', sans-serif">Stint Ultra Condensed</option>
                                    <option value="'Stint Ultra Expanded', sans-serif">Stint Ultra Expanded</option>
                                    <option value="'Stoke Regular', serif">Stoke Regular</option>
                                    <option value="'Strait Regular', sans-serif">Strait Regular</option>
                                    <option value="'Style Script Regular', cursive">Style Script Regular</option>
                                    <option value="'Stylish Regular', sans-serif">Stylish Regular</option>
                                    <option value="'Sue Ellen Francisco ', cursive">Sue Ellen Francisco </option>
                                    <option value="'SuezOne-Regular', serif">SuezOne-Regular</option>
                                    <option value="'Sulphur Point Regular', sans-serif">Sulphur Point Regular</option>
                                    <option value="'Sunshiney Regular', cursive">Sunshiney Regular</option>
                                    <option value="'Syncopate Regular', sans-serif">Syncopate Regular</option>
                                    <option value="'Syne Tactile Regular', sans-serif">Syne Tactile Regular</option>
                                    <option value="'Tilt Prism Regular', cursive">Tilt Prism Regular</option>
                                    <option value="'Tilt Warp Regular', cursive">Tilt Warp Regular</option>
                                    <option value="'Unbounded Regular', sans-serif">Unbounded Regular</option>
                                    <option value="'Uncial Antiqua', cursive">Uncial Antiqua</option>
                                    <option value="'Underdog', cursive">Underdog</option>
                                    <option value="'Unica One Regular', sans-serif">Unica One Regular</option>
                                    <option value="'UnifrakturCook', cursive">UnifrakturCook</option>
                                    <option value="'UnifrakturMaguntia', cursive">UnifrakturMaguntia</option>
                                    <option value="'Urbanist Regular', sans-serif">Urbanist Regular</option>
                                    <option value="'Vampiro One', cursive">Vampiro One</option>
                                    <option value="'Vast Shadow Regular', cursive">Vast Shadow Regular</option>
                                    <option value="'Viaoda Libre Regular', cursive">Viaoda Libre Regular</option>
                                    <option value="'Vidaloka ', serif">Vidaloka </option>
                                    <option value="'Vina Sans Regular', sans-serif">Vina Sans Regular</option>
                                    <option value="'Vollkorn Regular', serif">Vollkorn Regular</option>
                                    <option value="'Voltaire Regular', sans-serif">Voltaire Regular</option>
                                    <option value="'Wallpoet', cursive">Wallpoet</option>
                                    <option value="'Walter Turncoat Regular', cursive">Walter Turncoat Regular</option>
                                    <option value="'Wire One Regular', sans-serif">Wire One Regular</option>
                                    <option value="'Workbench Regular', sans-serif">Workbench Regular</option>
                                    <option value="'Young Serif Regular', serif">Young Serif Regular</option>
                                    <option value="'Zen Kaku Gothic Antique Regular', sans-serif">Zen Kaku Gothic Antique Regular</option>
                                    <option value="'Zen Tokyo Zoo Regular', cursive">Zen Tokyo Zoo Regular</option>
                                    <option value="'Zhi Mang Xing Regular', cursive">Zhi Mang Xing Regular</option>
                                    <option value="'Zilla Slab', serif">Zilla Slab</option>
                                </select>
                            </label>
                            <label>Effect:
                                <select id="advancedEffectType2">
                                    <option value="none">None</option>
                                    <option value="neon">Neon</option>
                                    <option value="splice">Splice</option>
                                    <option value="echo">Echo</option>
                                    <option value="glitch">Glitch</option>
                                </select>
                            </label>
                        </div>
                        <!-- Contextual controls for effects, hidden by default -->
                        <div id="fx-params2" class="text-style-controls fx-params">
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C1: <input type="color" id="effectColor1_2"></label>
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C2: <input type="color" id="effectColor2_2"></label>
                            <label class="fx-param-control" data-fx-for="glitch">FX C3: <input type="color" id="effectColor3_2"></label>
                            <label class="fx-param-control" data-fx-for="splice echo glitch">Dist: <input type="range" id="effectDistance2" min="0" max="50" value="10"></label>
                            <label class="fx-param-control" data-fx-for="splice echo">Angle: <input type="range" id="effectAngle2" min="-180" max="180" value="-45"></label>
                            <label class="fx-param-control" data-fx-for="neon">Glow: <input type="range" id="effectGlowSize2" min="0" max="100" value="20"></label>
                        </div>
                    </div>
                    <div id="presets2" class="collapsible-controls preset-gallery">
                        <!-- Preset previews will be generated here by JS -->
                    </div>    
                </div>
                <div class="presets" id="subtitlePresets">
                    <button class="preset-btn" onclick="setSubtitle('NEWS UPDATE')">News Update</button>
                    <button class="preset-btn" onclick="setSubtitle('UPDATE EXTRA')">Update Extra</button>
                    <button class="preset-btn" onclick="setSubtitle('SPECIAL')">Special</button>
                    <button class="preset-btn" onclick="setSubtitle('BREAKING NEWS UPDATE')">Breaking News Update</button>
                    <button class="preset-btn" onclick="setSubtitle('BUMPER NEWS UPDATE')">Bumper News Update</button>
                    <button class="preset-btn" onclick="setSubtitle('UPDATE')">Update</button>
                </div>
                <div class="text-input-group">
                    <div class="text-input">
                        <input type="text" id="text3" value="MAR-01 - Pt 1" placeholder="Text Line 3">
                        <div class="color-input-container">
                            <input type="color" id="color3" value="#ff0000">
                            <div class="color-preview" id="preview3"></div>
                        </div>
                        <input type="number" id="size3" value="160" min="10" max="500">
                    </div>
                    <div class="toggle-controls-container">
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'pos3')">Position</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'style3')">Style</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'bg3')">Background</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'shadow3')">Shadow</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'fx3')">FX</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'presets3')">Presets</button>
                    </div>
                    <div id="pos3" class="collapsible-controls">
                        <div class="text-position-controls">
                            <label>X: <input type="number" id="x3" class="pos-input" value="960"></label>
                            <label>Y: <input type="number" id="y3" class="pos-input" value="756"></label>
                            <button class="align-btn" onclick="setTextAlignment(2, 'left')">L</button>
                            <button class="align-btn" onclick="setTextAlignment(2, 'center')">C</button>
                            <button class="align-btn" onclick="setTextAlignment(2, 'right')">R</button>
                        </div>
                    </div>
                    <div id="style3" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Stroke: <input type="color" id="strokeColor3" value="#000000"></label>
                            <label>Thick: <input type="number" id="strokeThickness3" class="pos-input" value="2" min="0" max="50"></label>
                        </div>
                    </div>
                    <div id="bg3" class="collapsible-controls">
                        <div class="text-style-controls text-style-grid-row">
                            <label>BG: <input type="color" id="bgColor3" value="#ffffff"></label>
                            <label>BG Pad: <input type="number" id="bgPadding3" class="pos-input" value="10" min="0" max="50"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label><input type="checkbox" id="bgFullWidth3"> Full BG</label>
                            <label>BG Alpha: <input type="range" id="bgAlpha3" min="0" max="100" value="0" step="5"> <span id="bgAlphaValue3">0%</span></label>
                        </div>
                    </div>
                    <div id="shadow3" class="collapsible-controls">
                        <div class="text-style-controls text-style-grid-row">
                            <label title="Enable Shadow"><input type="checkbox" id="shadowEnabled3"> Enable Shadow</label>
                            <label>Shadow Color: <input type="color" id="shadowColor3" value="#000000"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Shadow Alpha: <input type="range" id="shadowAlpha3" min="0" max="100" value="50" step="5"> <span id="shadowAlphaValue3">50%</span></label>
                            <label>Shadow Blur: <input type="number" id="shadowBlur3" class="pos-input" value="5" min="0" max="50"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Offset X: <input type="number" id="shadowOffsetX3" class="pos-input" value="2" min="-50" max="50"></label>
                            <label>Offset Y: <input type="number" id="shadowOffsetY3" class="pos-input" value="2" min="-50" max="50"></label>
                        </div>
                    </div>
                    <div id="fx3" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Font:
                                <select id="fontFamily3">
                                    <option value="'Berlin Sans FB Demi Bold', sans-serif">Berlin Sans FB Demi Bold</option>
                                    <option value="'Bangers', cursive">Bangers</option>
                                    <option value="'Suez One', serif">Suez One</option>
                                    <option value="'VT323', monospace">VT323</option>
                                    <option value="'Abril Fatface', serif">Abril Fatface</option>
                                    <option value="'Aclonica Regular', sans-serif">Aclonica Regular</option>
                                    <option value="'Acme Regular', sans-serif">Acme Regular</option>
                                    <option value="'ADLaM Display Regular', cursive">ADLaM Display Regular</option>
                                    <option value="'Afacad Regular', sans-serif">Afacad Regular</option>
                                    <option value="'Agbalumo Regular', cursive">Agbalumo Regular</option>
                                    <option value="'Akronim Regular', cursive">Akronim Regular</option>
                                    <option value="'Alata Regular', sans-serif">Alata Regular</option>
                                    <option value="'Alexandria Regular', sans-serif">Alexandria Regular</option>
                                    <option value="'Alfa Slab One Regular', cursive">Alfa Slab One Regular</option>
                                    <option value="'Alkatra Regular', cursive">Alkatra Regular</option>
                                    <option value="'Almendra Display Regular', cursive">Almendra Display Regular</option>
                                    <option value="'Alumni Sans Regular', sans-serif">Alumni Sans Regular</option>
                                    <option value="'Amethysta Regular', serif">Amethysta Regular</option>
                                    <option value="'Amiko Regular', sans-serif">Amiko Regular</option>
                                    <option value="'Annapurna SIL', serif">Annapurna SIL</option>
                                    <option value="'Anta Regular', sans-serif">Anta Regular</option>
                                    <option value="'AR One Sans Regular', sans-serif">AR One Sans Regular</option>
                                    <option value="'Audiowide Regular', sans-serif">Audiowide Regular</option>
                                    <option value="'Bagel Fat One Regular', cursive">Bagel Fat One Regular</option>
                                    <option value="'Bakbak One Regular', sans-serif">Bakbak One Regular</option>
                                    <option value="'Barriecito Regular', cursive">Barriecito Regular</option>
                                    <option value="'Barrio Regular', cursive">Barrio Regular</option>
                                    <option value="'Berkshire Swash Regular', cursive">Berkshire Swash Regular</option>
                                    <option value="'Black And White Picture Regular', sans-serif">Black And White Picture Regular</option>
                                    <option value="'Black Ops One Regular', sans-serif">Black Ops One Regular</option>
                                    <option value="'Blaka Hollow Regular', cursive">Blaka Hollow Regular</option>
                                    <option value="'Bonbon Regular', cursive">Bonbon Regular</option>
                                    <option value="'Butcherman Regular', cursive">Butcherman Regular</option>
                                    <option value="'Caesar Dressing', cursive">Caesar Dressing</option>
                                    <option value="'Chokokutai Regular', cursive">Chokokutai Regular</option>
                                    <option value="'Eater', cursive">Eater</option>
                                    <option value="'Emblema One', cursive">Emblema One</option>
                                    <option value="'Fascinate', cursive">Fascinate</option>
                                    <option value="'Faster One Regular', cursive">Faster One Regular</option>
                                    <option value="'Federo', sans-serif">Federo</option>
                                    <option value="'Frijole', cursive">Frijole</option>
                                    <option value="'Fugaz One', sans-serif">Fugaz One</option>
                                    <option value="'Gabarito Regular', sans-serif">Gabarito Regular</option>
                                    <option value="'Geostar Fill', sans-serif">Geostar Fill</option>
                                    <option value="'Geostar', sans-serif">Geostar</option>
                                    <option value="'Goblin One', cursive">Goblin One</option>
                                    <option value="'Gochi Hand', cursive">Gochi Hand</option>
                                    <option value="'Hachi Maru Pop Regular', cursive">Hachi Maru Pop Regular</option>
                                    <option value="'Hahmlet Regular', serif">Hahmlet Regular</option>
                                    <option value="'Hedvig Letters Sans Regular', sans-serif">Hedvig Letters Sans Regular</option>
                                    <option value="'Hedvig Letters Serif 24pt Regular', serif">Hedvig Letters Serif 24pt Regular</option>
                                    <option value="'Honk Regular', cursive">Honk Regular</option>
                                    <option value="'Ingrid Darling Regular', cursive">Ingrid Darling Regular</option>
                                    <option value="'Jacquarda Bastarda 9 Regular', cursive">Jacquarda Bastarda 9 Regular</option>
                                    <option value="'Kablammo Regular', cursive">Kablammo Regular</option>
                                    <option value="'Kalnia Regular', sans-serif">Kalnia Regular</option>
                                    <option value="'Kay Pho Du', serif">Kay Pho Du</option>
                                    <option value="'Kdam Thmor Pro Regular', sans-serif">Kdam Thmor Pro Regular</option>
                                    <option value="'Kode Mono Regular', monospace">Kode Mono Regular</option>
                                    <option value="'Radio Canada Bold', sans-serif">Radio Canada Bold</option>
                                    <option value="'Radio Canada Regular', sans-serif">Radio Canada Regular</option>
                                    <option value="'Roboto (2)', sans-serif">Roboto (2)</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Stint Ultra Condensed', sans-serif">Stint Ultra Condensed</option>
                                    <option value="'Stint Ultra Expanded', sans-serif">Stint Ultra Expanded</option>
                                    <option value="'Stoke Regular', serif">Stoke Regular</option>
                                    <option value="'Strait Regular', sans-serif">Strait Regular</option>
                                    <option value="'Style Script Regular', cursive">Style Script Regular</option>
                                    <option value="'Stylish Regular', sans-serif">Stylish Regular</option>
                                    <option value="'Sue Ellen Francisco ', cursive">Sue Ellen Francisco </option>
                                    <option value="'SuezOne-Regular', serif">SuezOne-Regular</option>
                                    <option value="'Sulphur Point Regular', sans-serif">Sulphur Point Regular</option>
                                    <option value="'Sunshiney Regular', cursive">Sunshiney Regular</option>
                                    <option value="'Syncopate Regular', sans-serif">Syncopate Regular</option>
                                    <option value="'Syne Tactile Regular', sans-serif">Syne Tactile Regular</option>
                                    <option value="'Tilt Prism Regular', cursive">Tilt Prism Regular</option>
                                    <option value="'Tilt Warp Regular', cursive">Tilt Warp Regular</option>
                                    <option value="'Unbounded Regular', sans-serif">Unbounded Regular</option>
                                    <option value="'Uncial Antiqua', cursive">Uncial Antiqua</option>
                                    <option value="'Underdog', cursive">Underdog</option>
                                    <option value="'Unica One Regular', sans-serif">Unica One Regular</option>
                                    <option value="'UnifrakturCook', cursive">UnifrakturCook</option>
                                    <option value="'UnifrakturMaguntia', cursive">UnifrakturMaguntia</option>
                                    <option value="'Urbanist Regular', sans-serif">Urbanist Regular</option>
                                    <option value="'Vampiro One', cursive">Vampiro One</option>
                                    <option value="'Vast Shadow Regular', cursive">Vast Shadow Regular</option>
                                    <option value="'Viaoda Libre Regular', cursive">Viaoda Libre Regular</option>
                                    <option value="'Vidaloka ', serif">Vidaloka </option>
                                    <option value="'Vina Sans Regular', sans-serif">Vina Sans Regular</option>
                                    <option value="'Vollkorn Regular', serif">Vollkorn Regular</option>
                                    <option value="'Voltaire Regular', sans-serif">Voltaire Regular</option>
                                    <option value="'Wallpoet', cursive">Wallpoet</option>
                                    <option value="'Walter Turncoat Regular', cursive">Walter Turncoat Regular</option>
                                    <option value="'Wire One Regular', sans-serif">Wire One Regular</option>
                                    <option value="'Workbench Regular', sans-serif">Workbench Regular</option>
                                    <option value="'Young Serif Regular', serif">Young Serif Regular</option>
                                    <option value="'Zen Kaku Gothic Antique Regular', sans-serif">Zen Kaku Gothic Antique Regular</option>
                                    <option value="'Zen Tokyo Zoo Regular', cursive">Zen Tokyo Zoo Regular</option>
                                    <option value="'Zhi Mang Xing Regular', cursive">Zhi Mang Xing Regular</option>
                                    <option value="'Zilla Slab', serif">Zilla Slab</option>
                                </select>
                            </label>
                            <label>Effect:
                                <select id="advancedEffectType3">
                                    <option value="none">None</option>
                                    <option value="neon">Neon</option>
                                    <option value="splice">Splice</option>
                                    <option value="echo">Echo</option>
                                    <option value="glitch">Glitch</option>
                                </select>
                            </label>
                        </div>
                        <!-- Contextual controls for effects, hidden by default -->
                        <div id="fx-params3" class="text-style-controls fx-params">
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C1: <input type="color" id="effectColor1_3"></label>
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C2: <input type="color" id="effectColor2_3"></label>
                            <label class="fx-param-control" data-fx-for="glitch">FX C3: <input type="color" id="effectColor3_3"></label>
                            <label class="fx-param-control" data-fx-for="splice echo glitch">Dist: <input type="range" id="effectDistance3" min="0" max="50" value="10"></label>
                            <label class="fx-param-control" data-fx-for="splice echo">Angle: <input type="range" id="effectAngle3" min="-180" max="180" value="-45"></label>
                            <label class="fx-param-control" data-fx-for="neon">Glow: <input type="range" id="effectGlowSize3" min="0" max="100" value="20"></label>
                        </div>
                    </div>
                    <div id="presets3" class="collapsible-controls preset-gallery">
                        <!-- Preset previews will be generated here by JS -->
                    </div>                        
                </div>
                <div class="presets" id="datePresets">
                    <button class="preset-btn" onclick="setDate('{Date} - Pt 1')">{Date} - Pt 1</button>
                    <button class="preset-btn" onclick="setDate('{Date} - Pt 2')">{Date} - Pt 2</button>
                    <button class="preset-btn" onclick="setDate('{Date} - Pt 3')">{Date} - Pt 3</button>
                    <button class="preset-btn" onclick="updateDate()">Update Date</button>
                    <button class="preset-btn" onclick="setDate('LIVE CHAT & UPDATE')">LIVE CHAT & UPDATE</button>
                    <button class="preset-btn" onclick="setDate('FULL FRONT LINE')">Full Front Line</button>
                </div>            
                <div class="text-input-group">
                    <div class="text-input">
                        <textarea id="text4" placeholder="Text Line 4">HITS, STRIKES, LOSSES, OTHER</textarea>
                        <div class="text-input-rhs-controls"> <!-- New wrapper for color and size -->
                            <div class="color-input-container">
                                <input type="color" id="color4" value="#ff0000">
                                <div class="color-preview" id="preview4"></div>
                            </div>
                            <input type="number" id="size4" value="100" min="10" max="500">
                        </div>
                    </div>
                    <div class="toggle-controls-container">
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'pos4')">Position</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'style4')">Style</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'bg4')">Background</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'shadow4')">Shadow</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'fx4')">FX</button>
                        <button class="toggle-btn" onclick="toggleControlVisibility(this, 'presets4')">Presets</button>
                    </div>
                    <div id="pos4" class="collapsible-controls">
                        <div class="text-position-controls">
                            <label>X: <input type="number" id="x4" class="pos-input" value="960"></label>
                            <label>Y: <input type="number" id="y4" class="pos-input" value="756"></label>
                            <button class="align-btn" onclick="setTextAlignment(3, 'left')">L</button>
                            <button class="align-btn" onclick="setTextAlignment(3, 'center')">C</button>
                            <button class="align-btn" onclick="setTextAlignment(3, 'right')">R</button>
                        </div>
                    </div>
                    <div id="style4" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Stroke: <input type="color" id="strokeColor4" value="#000000"></label>
                            <label>Thick: <input type="number" id="strokeThickness4" class="pos-input" value="2" min="0" max="50"></label>
                        </div>
                    </div>
                    <div id="bg4" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>BG: <input type="color" id="bgColor4" value="#ffffff"></label> <!-- Default to white, alpha will be set by JS -->
                            <label><input type="checkbox" id="bgFullWidth4"> Full BG</label>
                            <label>BG Pad: <input type="number" id="bgPadding4" class="pos-input" value="10" min="0" max="50"></label>
                            <label>BG Alpha: <input type="range" id="bgAlpha4" min="0" max="100" value="0" step="5"> <span id="bgAlphaValue4">0%</span></label>
                        </div>
                    </div>
                    <div id="shadow4" class="collapsible-controls">
                        <div class="text-style-controls text-style-grid-row">
                            <label title="Enable Shadow"><input type="checkbox" id="shadowEnabled4"> Enable Shadow</label>
                            <label>Shadow Color: <input type="color" id="shadowColor4" value="#000000"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Shadow Alpha: <input type="range" id="shadowAlpha4" min="0" max="100" value="50" step="5"> <span id="shadowAlphaValue4">50%</span></label>
                            <label>Shadow Blur: <input type="number" id="shadowBlur4" class="pos-input" value="5" min="0" max="50"></label>
                        </div>
                        <div class="text-style-controls text-style-grid-row">
                            <label>Offset X: <input type="number" id="shadowOffsetX4" class="pos-input" value="2" min="-50" max="50"></label>
                            <label>Offset Y: <input type="number" id="shadowOffsetY4" class="pos-input" value="2" min="-50" max="50"></label>
                        </div>
                    </div>
                    <div id="fx4" class="collapsible-controls">
                        <div class="text-style-controls">
                            <label>Font:
                                <select id="fontFamily4">
                                    <option value="'Berlin Sans FB Demi Bold', sans-serif">Berlin Sans FB Demi Bold</option>
                                    <option value="'Bangers', cursive">Bangers</option>
                                    <option value="'Suez One', serif">Suez One</option>
                                    <option value="'VT323', monospace">VT323</option>
                                    <option value="'Abril Fatface', serif">Abril Fatface</option>
                                    <option value="'Aclonica Regular', sans-serif">Aclonica Regular</option>
                                    <option value="'Acme Regular', sans-serif">Acme Regular</option>
                                    <option value="'ADLaM Display Regular', cursive">ADLaM Display Regular</option>
                                    <option value="'Afacad Regular', sans-serif">Afacad Regular</option>
                                    <option value="'Agbalumo Regular', cursive">Agbalumo Regular</option>
                                    <option value="'Akronim Regular', cursive">Akronim Regular</option>
                                    <option value="'Alata Regular', sans-serif">Alata Regular</option>
                                    <option value="'Alexandria Regular', sans-serif">Alexandria Regular</option>
                                    <option value="'Alfa Slab One Regular', cursive">Alfa Slab One Regular</option>
                                    <option value="'Alkatra Regular', cursive">Alkatra Regular</option>
                                    <option value="'Almendra Display Regular', cursive">Almendra Display Regular</option>
                                    <option value="'Alumni Sans Regular', sans-serif">Alumni Sans Regular</option>
                                    <option value="'Amethysta Regular', serif">Amethysta Regular</option>
                                    <option value="'Amiko Regular', sans-serif">Amiko Regular</option>
                                    <option value="'Annapurna SIL', serif">Annapurna SIL</option>
                                    <option value="'Anta Regular', sans-serif">Anta Regular</option>
                                    <option value="'AR One Sans Regular', sans-serif">AR One Sans Regular</option>
                                    <option value="'Audiowide Regular', sans-serif">Audiowide Regular</option>
                                    <option value="'Bagel Fat One Regular', cursive">Bagel Fat One Regular</option>
                                    <option value="'Bakbak One Regular', sans-serif">Bakbak One Regular</option>
                                    <option value="'Barriecito Regular', cursive">Barriecito Regular</option>
                                    <option value="'Barrio Regular', cursive">Barrio Regular</option>
                                    <option value="'Berkshire Swash Regular', cursive">Berkshire Swash Regular</option>
                                    <option value="'Black And White Picture Regular', sans-serif">Black And White Picture Regular</option>
                                    <option value="'Black Ops One Regular', sans-serif">Black Ops One Regular</option>
                                    <option value="'Blaka Hollow Regular', cursive">Blaka Hollow Regular</option>
                                    <option value="'Bonbon Regular', cursive">Bonbon Regular</option>
                                    <option value="'Butcherman Regular', cursive">Butcherman Regular</option>
                                    <option value="'Caesar Dressing', cursive">Caesar Dressing</option>
                                    <option value="'Chokokutai Regular', cursive">Chokokutai Regular</option>
                                    <option value="'Eater', cursive">Eater</option>
                                    <option value="'Emblema One', cursive">Emblema One</option>
                                    <option value="'Fascinate', cursive">Fascinate</option>
                                    <option value="'Faster One Regular', cursive">Faster One Regular</option>
                                    <option value="'Federo', sans-serif">Federo</option>
                                    <option value="'Frijole', cursive">Frijole</option>
                                    <option value="'Fugaz One', sans-serif">Fugaz One</option>
                                    <option value="'Gabarito Regular', sans-serif">Gabarito Regular</option>
                                    <option value="'Geostar Fill', sans-serif">Geostar Fill</option>
                                    <option value="'Geostar', sans-serif">Geostar</option>
                                    <option value="'Goblin One', cursive">Goblin One</option>
                                    <option value="'Gochi Hand', cursive">Gochi Hand</option>
                                    <option value="'Hachi Maru Pop Regular', cursive">Hachi Maru Pop Regular</option>
                                    <option value="'Hahmlet Regular', serif">Hahmlet Regular</option>
                                    <option value="'Hedvig Letters Sans Regular', sans-serif">Hedvig Letters Sans Regular</option>
                                    <option value="'Hedvig Letters Serif 24pt Regular', serif">Hedvig Letters Serif 24pt Regular</option>
                                    <option value="'Honk Regular', cursive">Honk Regular</option>
                                    <option value="'Ingrid Darling Regular', cursive">Ingrid Darling Regular</option>
                                    <option value="'Jacquarda Bastarda 9 Regular', cursive">Jacquarda Bastarda 9 Regular</option>
                                    <option value="'Kablammo Regular', cursive">Kablammo Regular</option>
                                    <option value="'Kalnia Regular', sans-serif">Kalnia Regular</option>
                                    <option value="'Kay Pho Du', serif">Kay Pho Du</option>
                                    <option value="'Kdam Thmor Pro Regular', sans-serif">Kdam Thmor Pro Regular</option>
                                    <option value="'Kode Mono Regular', monospace">Kode Mono Regular</option>
                                    <option value="'Radio Canada Bold', sans-serif">Radio Canada Bold</option>
                                    <option value="'Radio Canada Regular', sans-serif">Radio Canada Regular</option>
                                    <option value="'Roboto (2)', sans-serif">Roboto (2)</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Stint Ultra Condensed', sans-serif">Stint Ultra Condensed</option>
                                    <option value="'Stint Ultra Expanded', sans-serif">Stint Ultra Expanded</option>
                                    <option value="'Stoke Regular', serif">Stoke Regular</option>
                                    <option value="'Strait Regular', sans-serif">Strait Regular</option>
                                    <option value="'Style Script Regular', cursive">Style Script Regular</option>
                                    <option value="'Stylish Regular', sans-serif">Stylish Regular</option>
                                    <option value="'Sue Ellen Francisco ', cursive">Sue Ellen Francisco </option>
                                    <option value="'SuezOne-Regular', serif">SuezOne-Regular</option>
                                    <option value="'Sulphur Point Regular', sans-serif">Sulphur Point Regular</option>
                                    <option value="'Sunshiney Regular', cursive">Sunshiney Regular</option>
                                    <option value="'Syncopate Regular', sans-serif">Syncopate Regular</option>
                                    <option value="'Syne Tactile Regular', sans-serif">Syne Tactile Regular</option>
                                    <option value="'Tilt Prism Regular', cursive">Tilt Prism Regular</option>
                                    <option value="'Tilt Warp Regular', cursive">Tilt Warp Regular</option>
                                    <option value="'Unbounded Regular', sans-serif">Unbounded Regular</option>
                                    <option value="'Uncial Antiqua', cursive">Uncial Antiqua</option>
                                    <option value="'Underdog', cursive">Underdog</option>
                                    <option value="'Unica One Regular', sans-serif">Unica One Regular</option>
                                    <option value="'UnifrakturCook', cursive">UnifrakturCook</option>
                                    <option value="'UnifrakturMaguntia', cursive">UnifrakturMaguntia</option>
                                    <option value="'Urbanist Regular', sans-serif">Urbanist Regular</option>
                                    <option value="'Vampiro One', cursive">Vampiro One</option>
                                    <option value="'Vast Shadow Regular', cursive">Vast Shadow Regular</option>
                                    <option value="'Viaoda Libre Regular', cursive">Viaoda Libre Regular</option>
                                    <option value="'Vidaloka ', serif">Vidaloka </option>
                                    <option value="'Vina Sans Regular', sans-serif">Vina Sans Regular</option>
                                    <option value="'Vollkorn Regular', serif">Vollkorn Regular</option>
                                    <option value="'Voltaire Regular', sans-serif">Voltaire Regular</option>
                                    <option value="'Wallpoet', cursive">Wallpoet</option>
                                    <option value="'Walter Turncoat Regular', cursive">Walter Turncoat Regular</option>
                                    <option value="'Wire One Regular', sans-serif">Wire One Regular</option>
                                    <option value="'Workbench Regular', sans-serif">Workbench Regular</option>
                                    <option value="'Young Serif Regular', serif">Young Serif Regular</option>
                                    <option value="'Zen Kaku Gothic Antique Regular', sans-serif">Zen Kaku Gothic Antique Regular</option>
                                    <option value="'Zen Tokyo Zoo Regular', cursive">Zen Tokyo Zoo Regular</option>
                                    <option value="'Zhi Mang Xing Regular', cursive">Zhi Mang Xing Regular</option>
                                    <option value="'Zilla Slab', serif">Zilla Slab</option>
                                </select>
                            </label>
                            <label>Effect:
                                <select id="advancedEffectType4">
                                    <option value="none">None</option>
                                    <option value="neon">Neon</option>
                                    <option value="splice">Splice</option>
                                    <option value="echo">Echo</option>
                                    <option value="glitch">Glitch</option>
                                </select>
                            </label>
                        </div>
                        <!-- Contextual controls for effects, hidden by default -->
                        <div id="fx-params4" class="text-style-controls fx-params">
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C1: <input type="color" id="effectColor1_4"></label>
                            <label class="fx-param-control" data-fx-for="neon splice echo glitch">FX C2: <input type="color" id="effectColor2_4"></label>
                            <label class="fx-param-control" data-fx-for="glitch">FX C3: <input type="color" id="effectColor3_4"></label>
                            <label class="fx-param-control" data-fx-for="splice echo glitch">Dist: <input type="range" id="effectDistance4" min="0" max="50" value="10"></label>
                            <label class="fx-param-control" data-fx-for="splice echo">Angle: <input type="range" id="effectAngle4" min="-180" max="180" value="-45"></label>
                            <label class="fx-param-control" data-fx-for="neon">Glow: <input type="range" id="effectGlowSize4" min="0" max="100" value="20"></label>
                        </div>
                    </div>
                    <div id="presets4" class="collapsible-controls preset-gallery">
                        <!-- Preset previews will be generated here by JS -->
                    </div>   
                </div> 
                <div class="presets" id="line4Presets">
                    <button class="preset-btn" onclick="setLine4('HITS, STRIKES, LOSSES, OTHER')">Hits, Losses, Strikes, Other</button>
                    <button class="preset-btn" onclick="setLine4('MILITARY AID')">Military Aid</button>
                    <button class="preset-btn" onclick="setLine4('GEOPOLITICAL NEWS')">Geopolitical news</button>
                    <button class="preset-btn" onclick="setLine4('WITH JONATHAN FINK')">With Jonathan Fink</button>
                    <button class="preset-btn" onclick="setLine4('3 DAY UPDATE')">3 Day Update</button>
                </div>
            </div>

            <div class="panel-section">
                <h2>Export</h2>
                <button onclick="exportLayoutToClipboard()" class="upload-btn" style="width: 100%;">Copy Layout Code</button>
                <div id="copy-feedback"></div>
            </div>
        </aside>


        <main class="center-panel">
            <!-- The canvas and its direct controls go here -->
            <div class="canvas-controls">
                 <button class="upload-btn" onclick="document.getElementById('imageInput').click()">Upload Image</button>
                 <input type="file" id="imageInput" accept="image/*" style="display: none;">
                 <button class="upload-btn" style="background-color: #9C27B0;" onclick="showAiModal()">Generate AI Image</button>
            </div>
            <div class="canvas-container">
                <canvas id="thumbnailCanvas"></canvas>
            </div>
            <button onclick="downloadThumbnail()" style="width: 100%; font-size: 20px; padding: 15px;">Download Thumbnail</button>
        </main>

        <aside class="right-panel">
            <!-- All the context-sensitive properties go here -->
            <div class="panel-section">
                <h2>Background Image</h2>


                <div class="opacity-control">
                    <label for="bg-brightness">Brightness:</label>
                    <input type="range" id="bg-brightness" min="0" max="200" value="100" step="5">
                    <span id="bg-brightness-value">100%</span>
                </div>
                <div class="opacity-control">
                    <label for="bg-contrast">Contrast:</label>
                    <input type="range" id="bg-contrast" min="0" max="200" value="100" step="5">
                    <span id="bg-contrast-value">100%</span>
                </div>
                <div class="opacity-control">
                    <label for="bg-saturate">Saturation:</label>
                    <input type="range" id="bg-saturate" min="0" max="200" value="100" step="5">
                    <span id="bg-saturate-value">100%</span>
                </div>

                <!-- New Filters -->
                <div class="opacity-control">
                    <label for="bg-warmth">Warmth:</label>
                    <input type="range" id="bg-warmth" min="0" max="200" value="100" step="5">
                    <span id="bg-warmth-value">100%</span>
                </div>
                <div class="opacity-control">
                    <label for="bg-exposure">Exposure:</label>
                    <input type="range" id="bg-exposure" min="0" max="200" value="100" step="5">
                    <span id="bg-exposure-value">100%</span>
                </div>
                <div class="opacity-control">
                    <label for="bg-tint-color">Tint Color:</label>
                    <input type="color" id="bg-tint-color" value="#FFBF00"> <!-- Default orange/yellow tint -->
                </div>
                <div class="opacity-control">
                    <label for="bg-tint-strength">Tint Strength:</label>
                    <input type="range" id="bg-tint-strength" min="0" max="100" value="0" step="5">
                    <span id="bg-tint-strength-value">0%</span>
                </div>
                <div class="opacity-control">
                    <label for="bg-vignette">Vignette:</label>
                    <input type="range" id="bg-vignette" min="0" max="100" value="0" step="5">
                    <span id="bg-vignette-value">0%</span>
                </div>
                <!-- End New Filters -->

                <div class="opacity-control">
                    <label for="imageOpacity">Image Opacity:</label>
                    <input type="range" id="imageOpacity" min="0" max="100" value="100" step="5">
                    <span id="opacityValue">100%</span>
                </div>
                
                <!-- NEW: Zoom Control -->
                <div class="opacity-control">
                    <label for="imageZoom">Image Zoom:</label>
                    <input type="range" id="imageZoomSlider" min="100" max="300" value="100" step="10">
                    <span id="zoomValue">100%</span>
                </div>
            </div>
            <div class="panel-section">            
                <h2 class="section-header">Alignment Guides</h2>
                <div class="text-style-controls">
                    <label><input type="checkbox" id="overlay-thirds" onchange="drawThumbnail()"> Rule of Thirds</label>
                    <label><input type="checkbox" id="overlay-center" onchange="drawThumbnail()"> Center Lines</label>
                </div>
            </div>
            <div class="panel-section">
                <h2>Logo Overlay</h2>
                <div class="logo-controls-container">
                    <div class="logo-selection">
                        <!-- Use img tags for thumbnails. The 'data-src' holds the actual image file name. -->
                        <img src="logo-none.png" alt="No Logo" class="logo-thumb active" onclick="selectLogo(this, null)">
                        <img src="logo1.png" alt="Logo 1" class="logo-thumb" onclick="selectLogo(this, 'logo1.png')">
                        <img src="logo2.png" alt="Logo 2" class="logo-thumb" onclick="selectLogo(this, 'logo2.png')">
                        <img src="logo3.png" alt="Logo 3" class="logo-thumb" onclick="selectLogo(this, 'logo3.png')">
                        <img src="logo4.png" alt="Logo 4" class="logo-thumb" onclick="selectLogo(this, 'logo4.png')">
                        <img src="logo5.png" alt="Logo 5" class="logo-thumb" onclick="selectLogo(this, 'logo5.png')">
                        <img src="logo6.png" alt="Logo 6" class="logo-thumb" onclick="selectLogo(this, 'logo6.png')">
                        <img src="logo7.png" alt="Logo 7" class="logo-thumb" onclick="selectLogo(this, 'logo7.png')">
                    </div>
                    <div class="logo-position-controls">
                        <label>Position:</label>
                        <button class="logo-pos-btn" onclick="setLogoPosition('top-left')">TL</button>
                        <button class="logo-pos-btn" onclick="setLogoPosition('top-right')">TR</button>
                        <button class="logo-pos-btn active" onclick="setLogoPosition('bottom-left')">BL</button> <!-- MODIFIED: Changed default to BL -->
                        <button class="logo-pos-btn" onclick="setLogoPosition('bottom-right')">BR</button>
                    </div>    
                    <div class="logo-size-controls">
                        <label for="logoScale">Size:</label>
                        <input type="range" id="logoScale" min="5" max="50" value="15" step="1">
                        <span id="logoScaleValue">15%</span>
                    </div>
                </div>
            </div>
            <div class="panel-section" id="object-properties-panel">
                <!-- This is the new home for selected object properties -->
                <h2 class="section-header">Selected Object Properties</h2>
                <div id="properties-content"></div>  
                      <button onclick="deleteSelectedObject()" style="background-color: #f44336; margin-top: 15px; display: none;" id="delete-object-btn">Delete Selected Object</button>
                </div>
            </div>
        </aside>
    </div>

    <!-- AI Image Generation Modal -->
    <div id="ai-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>AI Image Generation</h2>
            <div class="ai-controls">
                <textarea id="ai-prompt" placeholder="Describe the image you want to create..."></textarea>
                <div class="ai-row">
                    <label>Preset:</label>
                    <select id="ai-preset-prompts">
                        <option value="">-- Custom Prompt --</option>
                        <option value="The motherland monument in Kyiv, Ukraine, stylistic artist impression, cinematic, wide shot, 8k, hyperrealistic">Motherland Monument</option>
                        <option value="A dramatic explosion in a modern city street, cinematic, fire and smoke, high action, 8k photo">City Explosion</option>
                        <option value="Abstract background, blue and yellow energy waves, digital art, futuristic, clean">Abstract Energy</option>
                    </select>
                    <label>Model:</label>
                    <select id="ai-model">
                        <option value="text-to-image">Text to Image</option>
                        <option value="image-to-image">Image & Text to Image</option>
                    </select>
                    <!-- API Key Removed -->
                </div>
                 <div class="ai-row" id="ai-input-image-section" style="display: none;"> <!-- Hidden by default -->
                    <label for="ai-input-image-upload">Input Image:</label>
                    <input type="file" id="ai-input-image-upload" accept="image/*" style="flex-grow: 1;">
                </div>
                <!-- Moved Generate button here -->
                <button id="ai-generate-btn" class="ai-generate-btn-top" onclick="generateAiImage()">Generate Image</button>
                <button class="toggle-btn" onclick="this.nextElementSibling.classList.toggle('show')">Advanced</button>
                <div class="collapsible-controls">
                    <div class="ai-row">
                        <label>Seed:</label>
                        <input type="text" id="ai-seed" placeholder="Leave blank for random">
                        <label>Guidance:</label>
                        <input type="range" id="ai-guidance" min="0" max="10" value="2.5" step="0.1">
                        <span id="ai-guidance-value">2.5</span>
                    </div>
                </div>
            </div>

            <div class="ai-previews-container">
                <div class="ai-preview-box" id="ai-input-preview-box">
                    <h4>Input Image</h4>
                    <img id="ai-input-image-preview" src="#" alt="Input Preview" style="display:none;"/>
                    <div class="placeholder-text" style="display:block;">Upload an image for Image-to-Image models.</div>
                </div>
                <button id="ai-copy-output-to-input" class="ai-transfer-btn" onclick="copyAiOutputToInput()" title="Copy Output to Input">🔄</button>
                <div class="ai-preview-box" id="ai-output-preview-box">
                    <h4>Output Image</h4>
                    <div id="ai-loader" class="loader" style="display: none;"></div>
                    <img id="ai-preview-img" src="" alt="AI Generated Image Preview"/>
                     <div class="placeholder-text" style="display:block;">Generated image will appear here.</div>
                </div>
            </div>
            <div class="ai-actions">
                <button id="ai-generate-btn" onclick="generateAiImage()">Generate</button>
                <button id="ai-download-btn" onclick="downloadAiImage()" disabled>Download Output</button>
                <button id="ai-set-bg-btn" onclick="setAiImageAsBackground()" disabled>Download Output & Set Background</button>
            </div>

            <button onclick="closeAiModal()" style="margin-top: 20px; background-color: #f44336;">Close</button>
        </div>
    </div>
    <div id="snippet-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div id="snippet-step1">
                <h2>Step 1: Choose a Style</h2>
                <div id="snippet-preset-gallery" class="preset-gallery">
                <!-- Snippet preset previews will be generated here -->
                </div>
            </div>
            <div id="snippet-step2" style="display: none;">
                <h2>Step 2: Choose a Word</h2>
                <div id="snippet-word-choices" class="presets">
                <!-- Word choice buttons will be generated here -->
                </div>
            </div>
            <button onclick="closeSnippetModal()" style="margin-top: 20px; background-color: #f44336;">Cancel</button>
        </div>
    </div>

    <!-- Font Preview Modal -->
    <div id="font-preview-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Font Previews</h2>
            <div id="font-preview-gallery" class="font-gallery">
                <!-- SVG font previews will be generated here by JS -->
            </div>
            <button onclick="closeFontPreviewModal()" style="margin-top: 20px; background-color: #aaa;">Close</button>
        </div>
    </div>

    <!-- Emoji Picker Popup -->
    <div id="emoji-picker-popup" style="display: none; position: absolute; z-index: 1001; border: 1px solid #ccc; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
        <emoji-picker class="light" locale="en" data-source="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json"></emoji-picker>
    </div>

    <!-- Image Enlarge Modal -->
    <div id="enlarge-image-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content image-modal-content">
            <span class="close-modal-btn" onclick="closeEnlargeImageModal()">&times;</span>
            <img id="enlarged-image-element" src="" alt="Enlarged Image"/>
        </div>
    </div>
</body>

</html>
